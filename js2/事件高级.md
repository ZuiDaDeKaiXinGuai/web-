> 什么是事件

用户或浏览器自身执行的某种动作。诸如click(点击)、load(加载)、mouseover(鼠标悬停)

> 事件流

事件流(又叫事件传播)描述的是从页面中接收事件的顺序

E4及Netscape4两家公司的浏览器开发团队在看待浏览器事件方面还是一致的。如果单击了某个按钮，他们都认为单击事件不仅仅发生在按钮上，甚至也单击了整个页面。但有意思的是这两个公司居然提出了差不多是完全相反的事件流的概念。

IE的事件流是==事件冒泡==流，而Netscape的事件流是==事件捕获==流

```
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<div id="wrap"></div>
</body>
</html>
```

> 事件冒泡

事件开始时由最具体的元素(文档中嵌套层次最深的那个节点)接收，然后逐级向上传播到较为不具体的节点(文档)沿DOM树向上传播

```
graph LR
DIV#wrap-->body
body-->html
html-->document
```
==注意==所有现代浏览器都支持事件冒泡，但在具体实现在还是有一些差别。IE9、Firefox、Chrome、Safari将事件一直冒泡到window对象

```
graph LR
DIV#wrap-->body
body-->html
html-->document
document-->window
```

> 事件捕获

事件捕获的思想是不太具体的节点应该更早接收到事件，而最具体的节点应该最后接收到事件。事件捕获的用意在于在事件到达预定目标之前就捕获它（沿DOM树向下传播）

```
graph LR
document-->html
html-->body
body-->DIV#wrap
```
==注意==所有现代浏览器都支持事件冒泡，但在具体实现在还是有一些差别。IE9、Firefox、Chrome、Safari将事件一直冒泡到window对象
```
graph LR
window-->document
document-->html
html-->body
body-->DIV#wrap
```
> DOM事件流

DOM2级事件规定的事件流包括三个阶段：事件捕获阶段(capture phase)、处于目标阶段(target phase)和事件冒泡阶段(bubbling phase)

![image](F:\八维\易航\book\event.jpg)


```
<!--IE9\Opera\Firefox\Chrome\safari都支持DOM事件流；IE8及更早的不支持-->
```

>事件处理程序


```
<div id="box"></div>
box.onclick=function(){
    这就是事件处理程序
}
```
>HTML事件处理程序


```
<div id="box" onclick="alert(22)"></div>
<div id="box" onclick="hover()"></div>
function hover(){
    alert('day5')
}
<!--缺点很多一般不建议使用-->
```

> DOM0级事件处理程序

```
target.onclick=function(){
    执行的操作
};
target.onclick=null;
```
==优点==
简单+所有浏览器都支持

==缺点==
会在事件流的冒泡阶段被处理+后面的会替换前面的

>DOM2级事件处理程序

```
<!--IE8及IE8以下的不支持-->
<!--以执行顺序执行-->
<!--绑定事件 不加on-->
target.addEventListener('click',function(){
    alert(this.id)
},false);
target.removeEventListener('click',function(){
    alert(this.id)<!--无效移除-->
},false);
<!--以下才能有效移除-->
target.addEventListener('click',addevent,false);
target.removeEventListener('click',addevent,false);
<!--false:在冒泡阶段处理事件-->
<!--true:在捕获阶段处理事件-->
<!--大部分都在冒泡阶段处理事件这样可以最大限度兼容所有浏览器，如果不是特别需要就不要在事件捕获阶段处理事件程序-->
```
>IE事件处理程序


```
<!--与DOM0级的区别是this是元素attachEvent的this是windows-->
<!--不是以执行顺序执行而是已相反的顺序执行-->
<!--绑定事件 加on-->
target.attachEvent('onclick',function(){
    执行事件
})
<!--不能已匿名函数移除-->
target.detachEvent('onclick',function(){
    移除事件
})

```
>跨浏览器事件处理程序

```
var EventUtil = { 
 
 addHandler: function(element, type, handler){ 
 if (element.addEventListener){ 
 element.addEventListener(type, handler, false); 
 } else if (element.attachEvent){ 
 element.attachEvent("on" + type, handler); 
 } else { 
 element["on" + type] = handler; 
 } 
 }, 
 removeHandler: function(element, type, handler){ 
 if (element.removeEventListener){ 
 element.removeEventListener(type, handler, false); 
 } else if (element.detachEvent){ 
 element.detachEvent("on" + type, handler); 
 } else { 
 element["on" + type] = null; 
 } 
 } 
}; 

```

> 事件对象


```
target.onclick=function(event){
    var event=event || window.event;
    alert( e.type )<!--click-->
}
```
> 阻止事件冒泡


```
stopPropagation=function(event){
  	if (event.stopPropagation){ 
  	 	event.stopPropagation(); <!--平常浏览器-->
  	 } else { 
  	 	event.cancelBubble = true; <!--IE事件-->
  	 } 
}
```
>阻止事件默认行为
```
preventDefault=function(event){ 
	  if (event.preventDefault){ 
	  	event.preventDefault(); <!--平常浏览器-->
	  } else { 
	  	event.returnValue = false; <!--IE事件-->
	  } 
}
```
>获取事件源
```
getTarget=function(event){ 
    <!--非IE-->                  <!--IE-->
	return event.target || event.srcElement; 
}
```
>  UI事件

```
window.unload
window.load
window.scroll
window.resize
window.error
```

> 焦点事件

```
target.blur<!--失去焦点-->
target.focus<!--获得焦点-->

```
>鼠标与滑轮事件


```
target.click
target.dblclick
target.mousedown
target.mouseenter || target.mousemove  
target.mouseleave  ||  target.mouseout  ||  target.mouseover
target.mouseup

<!--右击&左击&滚轮-->
e.button
<!--右击默认菜单-->
document.oncontextmenu;
```

>键盘事件


```
target.keydown
target.keyup
event.keyCode
```

> 事件属性

```
event.pageX;
event.pageY;
event.clientX;
event.clientY;
event.screenX;
event.screenY;
```

>事件委托

当有大量元素需要注册事件的时候可以用事件委托实现

![image](https://github.com/typeofYh/bookpic/blob/master/eventwt.jpg?raw=true)